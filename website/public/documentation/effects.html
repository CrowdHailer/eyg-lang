<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://unpkg.com/tailwindcss@2.2.11/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/layout.css" />
    <link rel="stylesheet" href="/neo.css" />
    <script src="/easel.js" async defer></script>
    <title>Documentation - Eyg</title>
  </head><body ><div  class="vstack wrap"><header  class="yellow-gradient drop w-full"><div class="hstack max-w-3xl mx-auto">
          <div class="expand leading-relaxed">
            <div class="text-pink-4 border-l-8 border-white pl-2 -ml-2">
              There is no <strong class="font-bold">syntax</strong> ...
            </div>
            <ul class="underline text-black pl-2">
              <li><a href="/">Home</a></li>
              <li><a href="/documentation">Documentation</a></li>
            </ul>
          </div>
          <div class="border-2 border-black bg-purple-3 my-10 rounded-xl neo-shadow -mr-20">
            <div class="ml-5 mr-24">
              <h3 class="font-bold text-white">Eat Your Greens</h3>
              <h1 class="text-2xl font-bold">EYG</h1>
            </div>
          </div>
        </div><div  class="max-w-3xl mx-auto px-4 my-4 text-xl hstack wrap"><h1 >Effects</h1><span  class="expand"></span></div></header><div  class="expand w-full blue-gradient drop"><div class="max-w-3xl w-full mx-auto">
          <div class="wrap bg-white neo-shadow border-black border-2 mb-2 rounded-xl overflow-hidden">
            <pre data-easel="#hello" class="overflow-auto outline-none w-full my-1 mx-4" spellcheck="false" contenteditable="true"><span class="text-gray-500">let </span><span class="">message</span><span class="text-gray-500"> = </span><span class="text-green-4">"Hello, World!"</span><span class="text-gray-500">
let </span><span class="">greet</span><span class="text-gray-500"> = </span><span class="">message</span><span class="text-gray-500"> -&gt; perform </span><span class="text-yellow-4">Alert</span><span class="text-gray-500">(</span><span class="">message</span><span class="text-gray-500">)
</span><span class="">greet</span><span class="text-gray-500">(</span><span class="">message</span><span class="text-gray-500">)</span></pre>
            <div class="bg-purple-1 px-4 font-mono font-bold">:press space to run</div>
          </div>
          <!-- have a run button at the bottom which shows the file name before
          running. <br />

          Space on the right can highlight cursor and show types -->
        </div><div  class="max-w-3xl w-full mx-auto"><h2 >Choose</h2></div><p  class="max-w-2xl mx-auto">A random choice. 
Implementations can be handled to always return a fixed value or from a list or all.

The value passed when invoking the Choose effect is unit i.e. an empty record as behaviour is not defined by the caller of choose</p><div  class="max-w-3xl w-full mx-auto"><div  class="wrap bg-white neo-shadow border-black border-2 mb-2 rounded-xl overflow-hidden"><pre  class="overflow-auto outline-none w-full my-1 mx-4">_ -> {
  let choose = _ -> perform Choose({})
  let always = value -> handle Choose(_arg -> resume -> resume(value))
  let _ = always(True({}))(_ -> {
    let first = choose({})
    let second = choose({})
    [first, second]
  })
  let _ = "[True, True]"
  vacant
}</pre></div></div><p  class="max-w-2xl mx-auto">choose both by resuming the exec function multiple times

Need to wrap the exec function to return a list of it's value so that it can be concatenated in the handler</p><div  class="max-w-3xl w-full mx-auto"><div  class="wrap bg-white neo-shadow border-black border-2 mb-2 rounded-xl overflow-hidden"><pre  class="overflow-auto outline-none w-full my-1 mx-4">_ -> {
  let concat = vacant
  let choose = _ -> perform Choose({})
  let both = exec -> {
    let handler = _arg -> resume -> {
      let first = resume(True({}))
      let second = resume(False({}))
      concat(first)(second)
    }
    handle Choose(handler)(_ -> [exec({})])
  }
  let _ = both(_ -> {
    let first = choose({})
    let second = choose({})
    [first, second]
  })
  "[[True, True], [True, False], [False, True], [False, False]"
}</pre></div></div><div  class="max-w-3xl w-full mx-auto"><h2 >Fail</h2></div><p  class="max-w-2xl mx-auto">Short circuit execution with a failure.

I'm not sure of naming here. Can I use Error for the union type i.e. in Ok | Error at the same time as it for the Effect</p><div  class="max-w-3xl w-full mx-auto"><div  class="wrap bg-white neo-shadow border-black border-2 mb-2 rounded-xl overflow-hidden"><pre  class="overflow-auto outline-none w-full my-1 mx-4">_ -> {
  let result = {
    let ok = Ok
    let error = Error
    let fail = perform Error
    let expect = match {
      Ok value -> value
      Error reason -> fail(reason)
      vacant
    }
    let rescue = exec -> {
      let handler = reason -> _resume -> error(reason)
      handle Error(handler)(_ -> ok(exec({})))
    }
    {fail: fail, expect: expect, rescue: rescue}
  }
  vacant
}</pre></div></div><div  class="max-w-3xl w-full mx-auto"><h2 >Log</h2></div><p  class="max-w-2xl mx-auto">Logs are an effect
</p><div  class="max-w-3xl w-full mx-auto"><div  class="wrap bg-white neo-shadow border-black border-2 mb-2 rounded-xl overflow-hidden"><pre  class="overflow-auto outline-none w-full my-1 mx-4">{log: term -> perform Log(term), capture: {
  let handler = message -> k -> {
    let inner = k({})
    {logs: [message, ..inner.logs], ..inner}
  }
  run -> handle Log(handler)(_ -> {
    let return = run({})
    {return: return, logs: []}
  })
}}</pre></div></div><div  class="max-w-3xl w-full mx-auto"><h2 >Async Await</h2></div><p  class="max-w-2xl mx-auto">Both async and await are implemented as effects and can be caught for test purposes</p></div></div></body>